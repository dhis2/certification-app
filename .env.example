PROJECT_NAME="DHIS2 Certification API"
STACK_NAME=dhis-cert-api
DHIS2_CERT_API_IMAGE=dhis2-cert-api
DHIS2_CERT_CLIENT_IMAGE=dhis2-cert-client
TAG=local
CLIENT_TAG=local
CREATE_EMPTY_MIGRATION=false
SKIP_MIGRATIONS=false

# SERVER
NODE_ENV=development
PORT=3001

# TRUST PROXY â€” Controls Express "trust proxy" for accurate client IP detection.
# Behind a reverse proxy (Traefik in our case): 1 (trust first hop, default).
# No proxy / running natively: false (use direct socket IP).
# Number: how many proxy hops to trust. String: comma-separated trusted IPs.
TRUST_PROXY=1


# DATABASE
DB_HOST=dhis2-cert-db
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=dhis2_certification
DB_SSL=false


# JWT AUTHENTICATION
JWT_SECRET=secure-random-secret-that-is-at-least-32-characters-long
JWT_ACCESS_TOKEN_TTL=15m
JWT_REFRESH_TOKEN_TTL=7d

# OTP
OTP_APP_NAME=DHIS2-CERTIFICATION
OTP_ENCRYPTION_KEY=random-32-character-string-for-encryption

CORS_ORIGIN=http://localhost:3000


# W3C VERIFIABLE CREDENTIALS - SIGNING KEYS
# Development: Leave paths empty to use ephemeral keys
USE_VAULT=false
SIGNING_KEY_PATH=
SIGNING_PUBLIC_KEY_PATH=
SIGNING_KEY_PASSPHRASE=

# Production: Vault / OpenBao (Transit engine for signing/encryption, KV v2 for secrets)
# USE_VAULT=true
# VAULT_ADDR=https://vault.example.com
# VAULT_ROLE_ID=
# VAULT_SECRET_ID=

APP_BASE_URL=http://localhost:3001

ISSUER_DID=did:web:localhost
ISSUER_NAME=DHIS2 Server Certification Authority

# SEEDING
RUN_SEEDS=true
# SEED_ADMIN_EMAIL=
# SEED_ADMIN_PASSWORD=

# SESSION TIMEOUTS (NIST SP 800-63B-4 / OWASP Session Management)
SESSION_IDLE_TIMEOUT_SECONDS=1800
SESSION_ABSOLUTE_TIMEOUT_SECONDS=43200

REDIS_HOST=dhis2-cert-redis
REDIS_PASSWORD=
REDIS_PORT=6379

JWT_TOKEN_AUDIENCE=dhis2-cert-api
JWT_TOKEN_ISSUER=dhis2-cert-api

DOMAIN=certification.dhis2.org

MAIL_ENABLED=true
MAIL_HOST=
MAIL_PORT=587
MAIL_SECURE=true
MAIL_USER=
MAIL_PASSWORD=
MAIL_FROM_NAME=DHIS2 Server Certification
MAIL_FROM_ADDRESS=no-reply@dhis2.org
